version: 2

models:
  - name: ds_cleverbox__parsed__bonus_employee
    description: "CleverBox Parsed Bonus Employee"
    config:
      alias: parsed__bonus_employee
      meta:
        tf_config:
          filter: name IS NOT NULL
    columns:
      - name: sale_type
        data_type: STRING
        description: Sale product type
      - name: uid
        data_type: STRING
        description: Record identifier
      - name: bonus_value
        data_type: NUMERIC.PRICE
        description: Bonus value
        meta:
          tf_config:
            field: bonus
      - name: accrual_type
        data_type: STRING
        description: Accrual type
      - name: use_cost_price
        data_type: BOOLEAN
        description: Use cost price for bonus calculation
      - name: validity_from
        data_type: DATE
        description: Validity from
        meta:
          tf_config:
            expression: PARSE_DATE('%Y-%m-%d', validity_from)
      - name: validity_to
        data_type: DATE
        description: Validity to
        meta:
          tf_config:
            expression: PARSE_DATE('%Y-%m-%d', validity_to)
      - name: min_bonus_first_visit
        data_type: NUMERIC.PRICE
        description: Min bonus first visit
      - name: expected_sum_first_visit
        data_type: NUMERIC.COST
        description: Min bonus first visit
