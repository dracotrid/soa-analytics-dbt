version: 2

models:
  - name: ds_cleverbox__parsed__discount_usage_v1
    description: "CleverBox Parsed Goods Sales v1"
    config:
      alias: parsed__discount_usage_v1
      meta:
        tf_config:
          filter: field_0 is not null
          op: file_name_parse
          parse_version: 1
          parse_source_field: file_name
    columns:
      - name: date
        data_type: DATE
        description: ""
        meta:
          tf_config:
            expression: PARSE_DATE('%d.%m.%Y', field_0)
      - name: discount_name
        data_type: STRING
        description: Discount name
        meta:
          tf_config:
            field: field_2
      - name: product_cost
        data_type: NUMERIC.COST
        description: ""
        meta:
          tf_config:
            field: field_5
      - name: discount_value
        data_type: NUMERIC.COST
        description: ""
        meta:
          tf_config:
            field: field_3
      - name: product_id
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: field_6
      - name: product_name
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: field_7
      - name: client_code #TODO String, all id with leading 0
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: field_8
      - name: client_name
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: field_9
      - name: expert_name
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: field_10
      - name: branch
        data_type: STRING
        description: ""
        meta:
          tf_config:
            field: branch
            required: false
